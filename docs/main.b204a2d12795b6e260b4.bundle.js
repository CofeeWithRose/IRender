(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return converColorStr}));__webpack_require__(25),__webpack_require__(28),__webpack_require__(88),__webpack_require__(47),__webpack_require__(266),__webpack_require__(51),__webpack_require__(286),__webpack_require__(303),__webpack_require__(733),__webpack_require__(151),__webpack_require__(64),__webpack_require__(103),__webpack_require__(144),__webpack_require__(735);var _const__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(105);function converColorStr(r){try{return function converColor(r){var t,o=(r||"").replace(/\s/g,"").toLowerCase(),l=_const__WEBPACK_IMPORTED_MODULE_14__[o];if(l)return l;if(o.startsWith("#")){var a=o.substr(1);if(3===a.length){var e=a.split(""),p=e[0],n=e[1],i=e[2];return{r:clipColor(parseInt(""+p+p,16)),g:clipColor(parseInt(""+n+n,16)),b:clipColor(parseInt(""+i+i,16)),a:1}}if(4===a.length){var c=a.split(""),s=(p=c[0],n=c[1],i=c[2],c[3]);return{r:clipColor(parseInt(""+p+p,16)),g:clipColor(parseInt(""+n+n,16)),b:clipColor(parseInt(""+i+i,16)),a:clipColor(parseInt(""+s+s,16))/255}}if(6===a.length){var C=a.split(""),u=C[0],f=C[1],g=C[2],h=C[3],I=C[4],v=C[5];return{r:clipColor(parseInt(""+u+f,16)),g:clipColor(parseInt(""+g+h,16)),b:clipColor(parseInt(""+I+v,16)),a:1}}if(8===a.length){var b=a.split(""),O=(u=b[0],f=b[1],g=b[2],h=b[3],I=b[4],v=b[5],b[6]),m=b[7];return{r:clipColor(parseInt(""+u+f,16)),g:clipColor(parseInt(""+g+h,16)),b:clipColor(parseInt(""+I+v,16)),a:clipColor(parseInt(""+O+m,16))/255}}}if(o.startsWith("rgba")&&(t=o.match(/\(.*\)/))&&t[0]){var R=t[0].replace(/\(|\)/g,"").split(","),W=R.map((function(r,t){return r.includes("%")?clipColor(.01*parseFloat(r)*255):R.length-1===t?clipColor(255*parseFloat(r)):clipColor(parseFloat(r))}));return{r:p=W[0],g:n=W[1],b:i=W[2],a:(s=W[3])/255}}if(o.startsWith("rgb")&&(t=o.match(/\(.*\)/))&&t[0]){var F=t[0].replace(/\(|\)/g,"").split(",").map((function(r){return r.includes("%")?clipColor(.01*parseFloat(r)*255):clipColor(parseFloat(r))}));return{r:p=F[0],g:n=F[1],b:i=F[2],a:1}}}(r)}catch(r){}}function clipColor(r){return Math.min(Math.max(0,r),255)}Object.values(_const__WEBPACK_IMPORTED_MODULE_14__).forEach((function(r){return Object.freeze(r)}))},105:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"aliceblue",(function(){return aliceblue})),__webpack_require__.d(__webpack_exports__,"antiquewhite",(function(){return antiquewhite})),__webpack_require__.d(__webpack_exports__,"aqua",(function(){return aqua})),__webpack_require__.d(__webpack_exports__,"aquamarine",(function(){return aquamarine})),__webpack_require__.d(__webpack_exports__,"azure",(function(){return azure})),__webpack_require__.d(__webpack_exports__,"beige",(function(){return beige})),__webpack_require__.d(__webpack_exports__,"bisque",(function(){return bisque})),__webpack_require__.d(__webpack_exports__,"black",(function(){return black})),__webpack_require__.d(__webpack_exports__,"blanchedalmond",(function(){return blanchedalmond})),__webpack_require__.d(__webpack_exports__,"blue",(function(){return blue})),__webpack_require__.d(__webpack_exports__,"blueviolet",(function(){return blueviolet})),__webpack_require__.d(__webpack_exports__,"brown",(function(){return brown})),__webpack_require__.d(__webpack_exports__,"burlywood",(function(){return burlywood})),__webpack_require__.d(__webpack_exports__,"cadetblue",(function(){return cadetblue})),__webpack_require__.d(__webpack_exports__,"chartreuse",(function(){return chartreuse})),__webpack_require__.d(__webpack_exports__,"chocolate",(function(){return chocolate})),__webpack_require__.d(__webpack_exports__,"coral",(function(){return coral})),__webpack_require__.d(__webpack_exports__,"cornflowerblue",(function(){return cornflowerblue})),__webpack_require__.d(__webpack_exports__,"cornsilk",(function(){return cornsilk})),__webpack_require__.d(__webpack_exports__,"crimson",(function(){return crimson})),__webpack_require__.d(__webpack_exports__,"cyan",(function(){return cyan})),__webpack_require__.d(__webpack_exports__,"darkblue",(function(){return darkblue})),__webpack_require__.d(__webpack_exports__,"darkcyan",(function(){return darkcyan})),__webpack_require__.d(__webpack_exports__,"darkgoldenrod",(function(){return darkgoldenrod})),__webpack_require__.d(__webpack_exports__,"darkgray",(function(){return darkgray})),__webpack_require__.d(__webpack_exports__,"darkgreen",(function(){return darkgreen})),__webpack_require__.d(__webpack_exports__,"darkgrey",(function(){return darkgrey})),__webpack_require__.d(__webpack_exports__,"darkkhaki",(function(){return darkkhaki})),__webpack_require__.d(__webpack_exports__,"darkmagenta",(function(){return darkmagenta})),__webpack_require__.d(__webpack_exports__,"darkolivegreen",(function(){return darkolivegreen})),__webpack_require__.d(__webpack_exports__,"darkorange",(function(){return darkorange})),__webpack_require__.d(__webpack_exports__,"darkorchid",(function(){return darkorchid})),__webpack_require__.d(__webpack_exports__,"darkred",(function(){return darkred})),__webpack_require__.d(__webpack_exports__,"darksalmon",(function(){return darksalmon})),__webpack_require__.d(__webpack_exports__,"darkseagreen",(function(){return darkseagreen})),__webpack_require__.d(__webpack_exports__,"darkslateblue",(function(){return darkslateblue})),__webpack_require__.d(__webpack_exports__,"darkslategray",(function(){return darkslategray})),__webpack_require__.d(__webpack_exports__,"darkslategrey",(function(){return darkslategrey})),__webpack_require__.d(__webpack_exports__,"darkturquoise",(function(){return darkturquoise})),__webpack_require__.d(__webpack_exports__,"darkviolet",(function(){return darkviolet})),__webpack_require__.d(__webpack_exports__,"deeppink",(function(){return deeppink})),__webpack_require__.d(__webpack_exports__,"deepskyblue",(function(){return deepskyblue})),__webpack_require__.d(__webpack_exports__,"dimgray",(function(){return dimgray})),__webpack_require__.d(__webpack_exports__,"dimgrey",(function(){return dimgrey})),__webpack_require__.d(__webpack_exports__,"dodgerblue",(function(){return dodgerblue})),__webpack_require__.d(__webpack_exports__,"firebrick",(function(){return firebrick})),__webpack_require__.d(__webpack_exports__,"floralwhite",(function(){return floralwhite})),__webpack_require__.d(__webpack_exports__,"forestgreen",(function(){return forestgreen})),__webpack_require__.d(__webpack_exports__,"fuchsia",(function(){return fuchsia})),__webpack_require__.d(__webpack_exports__,"gainsboro",(function(){return gainsboro})),__webpack_require__.d(__webpack_exports__,"ghostwhite",(function(){return ghostwhite})),__webpack_require__.d(__webpack_exports__,"gold",(function(){return gold})),__webpack_require__.d(__webpack_exports__,"goldenrod",(function(){return goldenrod})),__webpack_require__.d(__webpack_exports__,"gray",(function(){return gray})),__webpack_require__.d(__webpack_exports__,"green",(function(){return green})),__webpack_require__.d(__webpack_exports__,"greenyellow",(function(){return greenyellow})),__webpack_require__.d(__webpack_exports__,"grey",(function(){return grey})),__webpack_require__.d(__webpack_exports__,"honeydew",(function(){return honeydew})),__webpack_require__.d(__webpack_exports__,"hotpink",(function(){return hotpink})),__webpack_require__.d(__webpack_exports__,"indianred",(function(){return indianred})),__webpack_require__.d(__webpack_exports__,"indigo",(function(){return indigo})),__webpack_require__.d(__webpack_exports__,"ivory",(function(){return ivory})),__webpack_require__.d(__webpack_exports__,"khaki",(function(){return khaki})),__webpack_require__.d(__webpack_exports__,"lavender",(function(){return lavender})),__webpack_require__.d(__webpack_exports__,"lavenderblush",(function(){return lavenderblush})),__webpack_require__.d(__webpack_exports__,"lawngreen",(function(){return lawngreen})),__webpack_require__.d(__webpack_exports__,"lemonchiffon",(function(){return lemonchiffon})),__webpack_require__.d(__webpack_exports__,"lightblue",(function(){return lightblue})),__webpack_require__.d(__webpack_exports__,"lightcoral",(function(){return lightcoral})),__webpack_require__.d(__webpack_exports__,"lightcyan",(function(){return lightcyan})),__webpack_require__.d(__webpack_exports__,"lightgoldenrodyellow",(function(){return lightgoldenrodyellow})),__webpack_require__.d(__webpack_exports__,"lightgray",(function(){return lightgray})),__webpack_require__.d(__webpack_exports__,"lightgreen",(function(){return lightgreen})),__webpack_require__.d(__webpack_exports__,"lightgrey",(function(){return lightgrey})),__webpack_require__.d(__webpack_exports__,"lightpink",(function(){return lightpink})),__webpack_require__.d(__webpack_exports__,"lightsalmon",(function(){return lightsalmon})),__webpack_require__.d(__webpack_exports__,"lightseagreen",(function(){return lightseagreen})),__webpack_require__.d(__webpack_exports__,"lightskyblue",(function(){return lightskyblue})),__webpack_require__.d(__webpack_exports__,"lightslategray",(function(){return lightslategray})),__webpack_require__.d(__webpack_exports__,"lightslategrey",(function(){return lightslategrey})),__webpack_require__.d(__webpack_exports__,"lightsteelblue",(function(){return lightsteelblue})),__webpack_require__.d(__webpack_exports__,"lightyellow",(function(){return lightyellow})),__webpack_require__.d(__webpack_exports__,"lime",(function(){return lime})),__webpack_require__.d(__webpack_exports__,"limegreen",(function(){return limegreen})),__webpack_require__.d(__webpack_exports__,"linen",(function(){return linen})),__webpack_require__.d(__webpack_exports__,"magenta",(function(){return magenta})),__webpack_require__.d(__webpack_exports__,"maroon",(function(){return maroon})),__webpack_require__.d(__webpack_exports__,"mediumaquamarine",(function(){return mediumaquamarine})),__webpack_require__.d(__webpack_exports__,"mediumblue",(function(){return mediumblue})),__webpack_require__.d(__webpack_exports__,"mediumorchid",(function(){return mediumorchid})),__webpack_require__.d(__webpack_exports__,"mediumpurple",(function(){return mediumpurple})),__webpack_require__.d(__webpack_exports__,"mediumseagreen",(function(){return mediumseagreen})),__webpack_require__.d(__webpack_exports__,"mediumslateblue",(function(){return mediumslateblue})),__webpack_require__.d(__webpack_exports__,"mediumspringgreen",(function(){return mediumspringgreen})),__webpack_require__.d(__webpack_exports__,"mediumturquoise",(function(){return mediumturquoise})),__webpack_require__.d(__webpack_exports__,"mediumvioletred",(function(){return mediumvioletred})),__webpack_require__.d(__webpack_exports__,"midnightblue",(function(){return midnightblue})),__webpack_require__.d(__webpack_exports__,"mintcream",(function(){return mintcream})),__webpack_require__.d(__webpack_exports__,"mistyrose",(function(){return mistyrose})),__webpack_require__.d(__webpack_exports__,"moccasin",(function(){return moccasin})),__webpack_require__.d(__webpack_exports__,"navajowhite",(function(){return navajowhite})),__webpack_require__.d(__webpack_exports__,"navy",(function(){return navy})),__webpack_require__.d(__webpack_exports__,"oldlace",(function(){return oldlace})),__webpack_require__.d(__webpack_exports__,"olive",(function(){return olive})),__webpack_require__.d(__webpack_exports__,"olivedrab",(function(){return olivedrab})),__webpack_require__.d(__webpack_exports__,"orange",(function(){return orange})),__webpack_require__.d(__webpack_exports__,"orangered",(function(){return orangered})),__webpack_require__.d(__webpack_exports__,"orchid",(function(){return orchid})),__webpack_require__.d(__webpack_exports__,"palegoldenrod",(function(){return palegoldenrod})),__webpack_require__.d(__webpack_exports__,"palegreen",(function(){return palegreen})),__webpack_require__.d(__webpack_exports__,"paleturquoise",(function(){return paleturquoise})),__webpack_require__.d(__webpack_exports__,"palevioletred",(function(){return palevioletred})),__webpack_require__.d(__webpack_exports__,"papayawhip",(function(){return papayawhip})),__webpack_require__.d(__webpack_exports__,"peachpuff",(function(){return peachpuff})),__webpack_require__.d(__webpack_exports__,"peru",(function(){return peru})),__webpack_require__.d(__webpack_exports__,"pink",(function(){return pink})),__webpack_require__.d(__webpack_exports__,"plum",(function(){return plum})),__webpack_require__.d(__webpack_exports__,"powderblue",(function(){return powderblue})),__webpack_require__.d(__webpack_exports__,"purple",(function(){return purple})),__webpack_require__.d(__webpack_exports__,"red",(function(){return red})),__webpack_require__.d(__webpack_exports__,"rosybrown",(function(){return rosybrown})),__webpack_require__.d(__webpack_exports__,"royalblue",(function(){return royalblue})),__webpack_require__.d(__webpack_exports__,"saddlebrown",(function(){return saddlebrown})),__webpack_require__.d(__webpack_exports__,"salmon",(function(){return salmon})),__webpack_require__.d(__webpack_exports__,"sandybrown",(function(){return sandybrown})),__webpack_require__.d(__webpack_exports__,"seagreen",(function(){return seagreen})),__webpack_require__.d(__webpack_exports__,"seashell",(function(){return seashell})),__webpack_require__.d(__webpack_exports__,"sienna",(function(){return sienna})),__webpack_require__.d(__webpack_exports__,"silver",(function(){return silver})),__webpack_require__.d(__webpack_exports__,"skyblue",(function(){return skyblue})),__webpack_require__.d(__webpack_exports__,"slateblue",(function(){return slateblue})),__webpack_require__.d(__webpack_exports__,"slategray",(function(){return slategray})),__webpack_require__.d(__webpack_exports__,"slategrey",(function(){return slategrey})),__webpack_require__.d(__webpack_exports__,"snow",(function(){return snow})),__webpack_require__.d(__webpack_exports__,"springgreen",(function(){return springgreen})),__webpack_require__.d(__webpack_exports__,"steelblue",(function(){return steelblue})),__webpack_require__.d(__webpack_exports__,"tan",(function(){return tan})),__webpack_require__.d(__webpack_exports__,"teal",(function(){return teal})),__webpack_require__.d(__webpack_exports__,"thistle",(function(){return thistle})),__webpack_require__.d(__webpack_exports__,"tomato",(function(){return tomato})),__webpack_require__.d(__webpack_exports__,"turquoise",(function(){return turquoise})),__webpack_require__.d(__webpack_exports__,"violet",(function(){return violet})),__webpack_require__.d(__webpack_exports__,"wheat",(function(){return wheat})),__webpack_require__.d(__webpack_exports__,"white",(function(){return white})),__webpack_require__.d(__webpack_exports__,"whitesmoke",(function(){return whitesmoke})),__webpack_require__.d(__webpack_exports__,"yellow",(function(){return yellow})),__webpack_require__.d(__webpack_exports__,"yellowgreen",(function(){return yellowgreen}));var aliceblue={r:240,g:248,b:255,a:1},antiquewhite={r:250,g:235,b:215,a:1},aqua={r:0,g:255,b:255,a:1},aquamarine={r:127,g:255,b:212,a:1},azure={r:240,g:255,b:255,a:1},beige={r:245,g:245,b:220,a:1},bisque={r:255,g:228,b:196,a:1},black={r:0,g:0,b:0,a:1},blanchedalmond={r:255,g:235,b:205,a:1},blue={r:0,g:0,b:255,a:1},blueviolet={r:138,g:43,b:226,a:1},brown={r:165,g:42,b:42,a:1},burlywood={r:222,g:184,b:135,a:1},cadetblue={r:95,g:158,b:160,a:1},chartreuse={r:127,g:255,b:0,a:1},chocolate={r:210,g:105,b:30,a:1},coral={r:255,g:127,b:80,a:1},cornflowerblue={r:100,g:149,b:237,a:1},cornsilk={r:255,g:248,b:220,a:1},crimson={r:220,g:20,b:60,a:1},cyan={r:0,g:255,b:255,a:1},darkblue={r:0,g:0,b:139,a:1},darkcyan={r:0,g:139,b:139,a:1},darkgoldenrod={r:184,g:134,b:11,a:1},darkgray={r:169,g:169,b:169,a:1},darkgreen={r:0,g:100,b:0,a:1},darkgrey={r:169,g:169,b:169,a:1},darkkhaki={r:189,g:183,b:107,a:1},darkmagenta={r:139,g:0,b:139,a:1},darkolivegreen={r:85,g:107,b:47,a:1},darkorange={r:255,g:140,b:0,a:1},darkorchid={r:153,g:50,b:204,a:1},darkred={r:139,g:0,b:0,a:1},darksalmon={r:233,g:150,b:122,a:1},darkseagreen={r:143,g:188,b:143,a:1},darkslateblue={r:72,g:61,b:139,a:1},darkslategray={r:47,g:79,b:79,a:1},darkslategrey={r:47,g:79,b:79,a:1},darkturquoise={r:0,g:206,b:209,a:1},darkviolet={r:148,g:0,b:211,a:1},deeppink={r:255,g:20,b:147,a:1},deepskyblue={r:0,g:191,b:255,a:1},dimgray={r:105,g:105,b:105,a:1},dimgrey={r:105,g:105,b:105,a:1},dodgerblue={r:30,g:144,b:255,a:1},firebrick={r:178,g:34,b:34,a:1},floralwhite={r:255,g:250,b:240,a:1},forestgreen={r:34,g:139,b:34,a:1},fuchsia={r:255,g:0,b:255,a:1},gainsboro={r:220,g:220,b:220,a:1},ghostwhite={r:248,g:248,b:255,a:1},gold={r:255,g:215,b:0,a:1},goldenrod={r:218,g:165,b:32,a:1},gray={r:128,g:128,b:128,a:1},green={r:0,g:128,b:0,a:1},greenyellow={r:173,g:255,b:47,a:1},grey={r:128,g:128,b:128,a:1},honeydew={r:240,g:255,b:240,a:1},hotpink={r:255,g:105,b:180,a:1},indianred={r:205,g:92,b:92,a:1},indigo={r:75,g:0,b:130,a:1},ivory={r:255,g:255,b:240,a:1},khaki={r:240,g:230,b:140,a:1},lavender={r:230,g:230,b:250,a:1},lavenderblush={r:255,g:240,b:245,a:1},lawngreen={r:124,g:252,b:0,a:1},lemonchiffon={r:255,g:250,b:205,a:1},lightblue={r:173,g:216,b:230,a:1},lightcoral={r:240,g:128,b:128,a:1},lightcyan={r:224,g:255,b:255,a:1},lightgoldenrodyellow={r:250,g:250,b:210,a:1},lightgray={r:211,g:211,b:211,a:1},lightgreen={r:144,g:238,b:144,a:1},lightgrey={r:211,g:211,b:211,a:1},lightpink={r:255,g:182,b:193,a:1},lightsalmon={r:255,g:160,b:122,a:1},lightseagreen={r:32,g:178,b:170,a:1},lightskyblue={r:135,g:206,b:250,a:1},lightslategray={r:119,g:136,b:153,a:1},lightslategrey={r:119,g:136,b:153,a:1},lightsteelblue={r:176,g:196,b:222,a:1},lightyellow={r:255,g:255,b:224,a:1},lime={r:0,g:255,b:0,a:1},limegreen={r:50,g:205,b:50,a:1},linen={r:250,g:240,b:230,a:1},magenta={r:255,g:0,b:255,a:1},maroon={r:128,g:0,b:0,a:1},mediumaquamarine={r:102,g:205,b:170,a:1},mediumblue={r:0,g:0,b:205,a:1},mediumorchid={r:186,g:85,b:211,a:1},mediumpurple={r:147,g:112,b:219,a:1},mediumseagreen={r:60,g:179,b:113,a:1},mediumslateblue={r:123,g:104,b:238,a:1},mediumspringgreen={r:0,g:250,b:154,a:1},mediumturquoise={r:72,g:209,b:204,a:1},mediumvioletred={r:199,g:21,b:133,a:1},midnightblue={r:25,g:25,b:112,a:1},mintcream={r:245,g:255,b:250,a:1},mistyrose={r:255,g:228,b:225,a:1},moccasin={r:255,g:228,b:181,a:1},navajowhite={r:255,g:222,b:173,a:1},navy={r:0,g:0,b:128,a:1},oldlace={r:253,g:245,b:230,a:1},olive={r:128,g:128,b:0,a:1},olivedrab={r:107,g:142,b:35,a:1},orange={r:255,g:165,b:0,a:1},orangered={r:255,g:69,b:0,a:1},orchid={r:218,g:112,b:214,a:1},palegoldenrod={r:238,g:232,b:170,a:1},palegreen={r:152,g:251,b:152,a:1},paleturquoise={r:175,g:238,b:238,a:1},palevioletred={r:219,g:112,b:147,a:1},papayawhip={r:255,g:239,b:213,a:1},peachpuff={r:255,g:218,b:185,a:1},peru={r:205,g:133,b:63,a:1},pink={r:255,g:192,b:203,a:1},plum={r:221,g:160,b:221,a:1},powderblue={r:176,g:224,b:230,a:1},purple={r:128,g:0,b:128,a:1},red={r:255,g:0,b:0,a:1},rosybrown={r:188,g:143,b:143,a:1},royalblue={r:65,g:105,b:225,a:1},saddlebrown={r:139,g:69,b:19,a:1},salmon={r:250,g:128,b:114,a:1},sandybrown={r:244,g:164,b:96,a:1},seagreen={r:46,g:139,b:87,a:1},seashell={r:255,g:245,b:238,a:1},sienna={r:160,g:82,b:45,a:1},silver={r:192,g:192,b:192,a:1},skyblue={r:135,g:206,b:235,a:1},slateblue={r:106,g:90,b:205,a:1},slategray={r:112,g:128,b:144,a:1},slategrey={r:112,g:128,b:144,a:1},snow={r:255,g:250,b:250,a:1},springgreen={r:0,g:255,b:127,a:1},steelblue={r:70,g:130,b:180,a:1},tan={r:210,g:180,b:140,a:1},teal={r:0,g:128,b:128,a:1},thistle={r:216,g:191,b:216,a:1},tomato={r:255,g:99,b:71,a:1},turquoise={r:64,g:224,b:208,a:1},violet={r:238,g:130,b:238,a:1},wheat={r:245,g:222,b:179,a:1},white={r:255,g:255,b:255,a:1},whitesmoke={r:245,g:245,b:245,a:1},yellow={r:255,g:255,b:0,a:1},yellowgreen={r:154,g:205,b:50,a:1}},12:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return loadCircle})),__webpack_require__.d(__webpack_exports__,"c",(function(){return loadText})),__webpack_require__.d(__webpack_exports__,"b",(function(){return loadReact}));__webpack_require__(318);function loadCircle(irender,r){var tempTexture=document.createElement("canvas");tempTexture.width=2*r,tempTexture.height=2*r;var tempCtx=tempTexture.getContext("2d");return tempCtx.fillStyle="rgba(255,255, 255, 1)",tempCtx.arc(r,r,r,0,2*Math.PI),tempCtx.fill(),irender.loadImg(tempTexture)}function loadText(iRender,str,size){var canvas=document.createElement("canvas");canvas.width=size.x,canvas.height=size.y;var ctx=canvas.getContext("2d");return ctx.textAlign="center",ctx.textBaseline="hanging",ctx.fillStyle="white",ctx.font="20px 微软雅黑",ctx.strokeStyle="white",ctx.lineWidth=1,ctx.fillText(str,.5*size.x,.5*(size.y-20)),iRender.loadImg(canvas)}function loadReact(iRender,size){var canvas=document.createElement("canvas");canvas.width=size.x,canvas.height=size.y;var ctx=canvas.getContext("2d");return ctx.fillStyle="white",ctx.fillRect(0,0,size.x,size.y),iRender.loadImg(canvas)}},19:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return startFPS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return stopFPS}));var id=0;function startFPS(){var frameCount=0,fpsDiv=document.querySelector("#fps"),lastTime=performance.now();!function caculateFps(){frameCount++;var now=performance.now();if(now-lastTime>=1e3){var preFrameSeconds=.001*(now-lastTime)/frameCount;fpsDiv.innerHTML="fps: "+Math.round(1/preFrameSeconds),frameCount=0,lastTime=now}id=requestAnimationFrame(caculateFps)}()}function stopFPS(){cancelAnimationFrame(id)}},320:function(module,exports,__webpack_require__){var api=__webpack_require__(214),content=__webpack_require__(743);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},321:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/stand1.c1512cae.png"},322:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/run1.f03613f5.png"},323:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/run2.47d4cf33.png"},324:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/run3.196ec795.png"},325:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/run4.7109a280.png"},326:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/run5.26b6ef9b.png"},327:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/run6.29334114.png"},328:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/run7.e396916e.png"},329:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/maggot.e684f465.png"},331:function(module,exports,__webpack_require__){__webpack_require__(332),__webpack_require__(488),__webpack_require__(489),__webpack_require__(673),__webpack_require__(685),__webpack_require__(688),module.exports=__webpack_require__(693)},399:function(module,exports){},489:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(258)},49:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return IRender}));__webpack_require__(36),__webpack_require__(104),__webpack_require__(15),__webpack_require__(24),__webpack_require__(18),__webpack_require__(29),__webpack_require__(697),__webpack_require__(702),__webpack_require__(704),__webpack_require__(705),__webpack_require__(706),__webpack_require__(708),__webpack_require__(709),__webpack_require__(710),__webpack_require__(711),__webpack_require__(712),__webpack_require__(713),__webpack_require__(714),__webpack_require__(715),__webpack_require__(717),__webpack_require__(718),__webpack_require__(719),__webpack_require__(720),__webpack_require__(721),__webpack_require__(722),__webpack_require__(723),__webpack_require__(724),__webpack_require__(725),__webpack_require__(726),__webpack_require__(727),__webpack_require__(728),__webpack_require__(25),__webpack_require__(729),__webpack_require__(730),__webpack_require__(37),__webpack_require__(317),__webpack_require__(731),__webpack_require__(206),__webpack_require__(285),__webpack_require__(28),__webpack_require__(47);var color_const=__webpack_require__(105),__assign=function(){return(__assign=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++)for(var e in r=arguments[i])Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t}).apply(this,arguments)},RGBA=function RGBA(t,r,i,s){this.r=t,this.r=r,this.b=i,this.a=s},WHITE=__assign({},color_const.white);Object.freeze(WHITE);var BLACK=__assign({},color_const.black);Object.freeze(BLACK);var SHADER_TYPE,E,Vec2=function Vec2(e,r){this.x=e,this.y=r},Iimage=(Object.freeze({x:0,y:0}),Object.freeze({x:1,y:1}),function(){function t(t){this.position=new Vec2(0,0),this.color=new RGBA(255,255,255,1),this.zIndex=0,this.scale=new Vec2(1,1),this.rotation=0,this.offset=new Vec2(0,0),this.size=new Vec2(1,1),this.texTureSize=new Vec2(0,0),this.elementSize=new Vec2(0,0),this.update=t}return t.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e,this.update.updatePosition(this.elementIndex,this.position)},t.prototype.setImgId=function(t){this.imgId=t,this.update.updateImg(this.elementIndex,this.imgId)},t.prototype.setColor=function(t,e,i,s){this.color.r=t,this.color.g=e,this.color.b=i,this.color.a=s,this.update.updateColor(this.elementIndex,this.color)},t.prototype.setZIndex=function(t){this.zIndex!==t&&(this.zIndex=t,this.update.updateZindex())},t.prototype.setRotation=function(t){this.rotation=t,this.update.updateRotation(this.elementIndex,t)},t.prototype.setScale=function(t,e){this.scale.x=t,this.scale.y=e,this.setScaledSize(this.elementSize.x,this.elementSize.y),this.update.updateScale(this.elementIndex,this.scale)},t.prototype.setOffset=function(t,e){this.offset.x=t,this.offset.y=e,this.update.updateOffset(this.elementIndex,this.offset)},t.prototype.setTextureSize=function(t,e){this.texTureSize.x=t,this.texTureSize.y=e},t.prototype.setScaledSize=function(t,e){this.size.x=Math.abs(t*this.scale.x),this.size.y=Math.abs(e*this.scale.y)},t.prototype.setSize=function(t,e){this.elementSize.x=t,this.elementSize.y=e,this.setScaledSize(t,e),this.update.updateSize(this.elementIndex,this.elementSize)},t}());function compileShader(E,R,S,A){var e,r=((e={})[SHADER_TYPE.VERTEX_SHADER]=E.VERTEX_SHADER,e[SHADER_TYPE.FRAGMENT_SHADER]=E.FRAGMENT_SHADER,e),D=E.createShader(r[A]);return E.shaderSource(D,S),E.compileShader(D),E.attachShader(R,D),D}(E=SHADER_TYPE||(SHADER_TYPE={})).VERTEX_SHADER="VERTEX_SHADER",E.FRAGMENT_SHADER="FRAGMENT_SHADER";__webpack_require__(732);var TextureCanvasManager=function(){function t(t){var i=this;void 0===t&&(t=2048),this.curX=1,this.curY=1,this.curMaxHeight=0,this.pading=1,this.positionInfo={},this.id=0,this.checkSpace=function(t,h){i.canvas.width-i.curX<t&&i.movePosition(t,h)},this.movePosition=function(t,h){i.curMaxHeight<h&&(i.curMaxHeight=h);var n=i.curX+t+i.pading;n>=i.canvas.width?(i.curX=i.pading,i.curY+=i.curMaxHeight+i.pading,i.curMaxHeight=0):i.curX=n},t=this.normolizeSize(t),this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=t,this.ctx=this.canvas.getContext("2d")}return t.prototype.normolizeSize=function(t){var i=Math.ceil(Math.log2(t));return Math.pow(2,Math.min(i,13))},t.prototype.setImage=function(t){var i=this.id++;return this.checkSpace(t.width,t.height),this.ctx.drawImage(t,this.curX,this.curY,t.width,t.height),this.positionInfo[i]={x:this.curX,y:this.curY,w:t.width,h:t.height},this.movePosition(t.width,t.height),i},t.prototype.getImageInfo=function(t){return this.positionInfo[t]},t}(),core_assign=function(){return(core_assign=Object.assign||function(t){for(var i,e=1,a=arguments.length;e<a;e++)for(var r in i=arguments[e])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t}).apply(this,arguments)},DEFAULT_OPTION={maxNumber:5e4,textureSize:2048,autoUpdate:!0,offSreen:!1},IRender=function(){function t(t,i){var e=this;this.elementList=[],this.positionBufferChanged=!1,this.imageIdBufferChanged=!1,this.colorBufferChanged=!1,this.textureChange=!0,this.zIndexChange=!1,this.scaleChange=!1,this.rotationChange=!1,this.sizeChanged=!1,this.rafing=!1,this.updateId=0,this.updatedId=0,this.elementPool=new Set,this.getTexture=function(){return e.textureManager.canvas},this.bufferData=function(t,i,a){e.gl.bindBuffer(t,i),e.gl.bufferSubData(t,0,a)},this.updateImidiatly=function(){e.updatedId!==e.updateId&&(e.updatedId=e.updateId,e.rafing=!1,e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.handleZindexChange(),e.writeGLBuffer(),e.checkReloadTexure(),e.render())},this.checkReloadTexure=function(){e.textureChange&&(e.gl.bindTexture(e.gl.TEXTURE_2D,e.texture),e.gl.texImage2D(e.gl.TEXTURE_2D,0,e.gl.RGBA,e.gl.RGBA,e.gl.UNSIGNED_BYTE,e.textureManager.canvas),e.textureChange=!1)},this.updatePosition=function(t,i){var a=2*t;e.attrData.a_position[a]=i.x,e.attrData.a_position[a+1]=i.y,e.positionBufferChanged=!0,e.update()},this.update=function(){e.updateId++,e.options.autoUpdate&&!0!==e.rafing&&(requestAnimationFrame(e.updateImidiatly),e.rafing=!0)},this.updateImage=function(t,i){var a=2*t,r=e.textureManager.getImageInfo(i),s=r.x,o=r.y;e.attrData.a_texCoord[a]=s,e.attrData.a_texCoord[a+1]=o,e.imageIdBufferChanged=!0,e.update()},this.updateColor=function(t,i){var a=4*t,r=255*i.a;e.attrData.a_color[a]=i.r,e.attrData.a_color[a+1]=i.g,e.attrData.a_color[a+2]=i.b,e.attrData.a_color[a+3]=r,e.colorBufferChanged=!0,e.update()},this.updateScale=function(t,i){var a=2*t,r=i.x,s=i.y;e.attrData.a_scale[a]=r,e.attrData.a_scale[a+1]=s,e.scaleChange=!0,e.update()},this.updateRotation=function(t,i){var a=1*t;e.attrData.a_rotation[a]=i,e.rotationChange=!0,e.update()},this.updateSize=function(t,i){var a=i.x,r=i.y,s=2*t;e.attrData.a_spriteSize[s]=a,e.attrData.a_spriteSize[s+1]=r,e.sizeChanged=!0,e.update()},this.updateOffset=function(){},this.updateZindex=function(){e.zIndexChange=!0},this.options=core_assign(core_assign({},DEFAULT_OPTION),i),this.glCanvas=t,this.textureManager=new TextureCanvasManager(this.options.textureSize),this.gl=t.getContext("webgl",{alpha:!0})||t.getContext("experimental-webgl"),this.glExt=this.gl.getExtension("ANGLE_instanced_arrays"),this.gl.getExtension("OES_element_index_uint"),this.gl.clearColor(0,0,0,0);var a=this.gl.createProgram();compileShader(this.gl,a,"\nprecision highp float;\n\n#define PI 3.14159265358979323846264338327950288\n\nuniform vec2 u_windowSize;\n\nuniform vec2 u_cameraPosition;\n\nuniform vec2 u_cameraSize;\n\nuniform vec2 u_textureSize;\n\nattribute vec2 a_position;\n\nattribute vec2 a_direction;\n\nattribute vec2 a_texCoord;\n\nattribute vec2 a_scale;\n\nattribute vec2 a_spriteSize;\n\nattribute vec2 a_offset;\n\nattribute float a_rotation;\n\n\nattribute vec4 a_color;\n\nvarying vec2 v_texCoord;\n\n\nvarying vec4 v_color;\n\nfloat atant2 (float y, float x) {\n\nif( x > 0.0 ) {\nreturn atan(y/x);\n}\n\nif ( x == 0.0 ) {\nreturn y > 0.0? 0.5 * PI : - 0.5 * PI;\n}\n\nreturn y >= 0.0? (atan(y/x) + PI) : (atan(y/x) - PI);\n}\n\n\nvec2 rotateVec2 (float rad, vec2 center, vec2 point) {\n\nfloat dist = distance(point, center);\nfloat xd = ( point.x - center.x )/dist;\nfloat yd = ( point.y - center.y )/dist;\nfloat angle = rad + atant2( point.y - center.y, point.x - center.x ); \nreturn center + vec2( cos(angle) * dist, sin(angle) * dist );\n}\n\nvoid main() {\n\nv_color = a_color;\n\nvec2 spriteSize = a_spriteSize * a_scale;\n\n\nvec2 center = a_position;\n\nvec2 direction = a_direction;\n\nvec2 texCoord = a_texCoord + direction * a_spriteSize;\n\nv_texCoord =(texCoord + a_offset )/u_textureSize;\n\nvec2 position = center + (direction * spriteSize -0.5 * spriteSize);\n\nfloat rotation = radians(a_rotation);\n\n\nvec2 positionScale = u_windowSize/u_cameraSize;\nvec2 canvasPosition = (rotateVec2( rotation, center, position) - u_cameraPosition) * positionScale;\ngl_Position = vec4( (canvasPosition/u_windowSize *2.0 -1.0) * vec2(1, -1), 1, 1 );\n\n}\n",SHADER_TYPE.VERTEX_SHADER);var r=this.options.offSreen?"\nprecision mediump float;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_texCoord;\n\nvarying vec4 v_color;\n\nvoid main(){\nvec4 textColor = texture2D(u_image, v_texCoord);\ngl_FragColor = textColor * v_color;\n}\n":"\nprecision mediump float;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_texCoord;\n\nvarying vec4 v_color;\n\nvoid main(){\nvec4 textColor = texture2D(u_image, v_texCoord);\ngl_FragColor = textColor * vec4( v_color.r, v_color.g, v_color.b, 1 ) * v_color.a; \n}\n";compileShader(this.gl,a,r,SHADER_TYPE.FRAGMENT_SHADER),this.gl.linkProgram(a),this.gl.useProgram(a),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.uniformLocations={u_windowSize:this.gl.getUniformLocation(a,"u_windowSize"),u_textureSize:this.gl.getUniformLocation(a,"u_textureSize"),u_cameraSize:this.gl.getUniformLocation(a,"u_cameraSize"),u_cameraPosition:this.gl.getUniformLocation(a,"u_cameraPosition")},this.attribuitesLocations={a_position:this.gl.getAttribLocation(a,"a_position"),a_spriteSize:this.gl.getAttribLocation(a,"a_spriteSize"),a_texCoord:this.gl.getAttribLocation(a,"a_texCoord"),a_color:this.gl.getAttribLocation(a,"a_color"),a_rotation:this.gl.getAttribLocation(a,"a_rotation"),a_scale:this.gl.getAttribLocation(a,"a_scale"),a_direction:this.gl.getAttribLocation(a,"a_direction")},this.initBuffer(),this.initTexture(),this.resize(),this.setViewPort(),this.handle={updatePosition:this.updatePosition,updateImg:this.updateImage,updateColor:this.updateColor,updateZindex:this.updateZindex,updateScale:this.updateScale,updateRotation:this.updateRotation,updateSize:this.updateSize,updateOffset:this.updateOffset}}return t.prototype.writeGLBuffer=function(){this.positionBufferChanged&&(this.bufferData(this.gl.ARRAY_BUFFER,this.attrBuffer.a_position,this.attrData.a_position),this.positionBufferChanged=!1),this.imageIdBufferChanged&&(this.bufferData(this.gl.ARRAY_BUFFER,this.attrBuffer.a_texCoord,this.attrData.a_texCoord),this.imageIdBufferChanged=!1),this.sizeChanged&&(this.bufferData(this.gl.ARRAY_BUFFER,this.attrBuffer.a_spriteSize,this.attrData.a_spriteSize),this.sizeChanged=!1),this.colorBufferChanged&&(this.bufferData(this.gl.ARRAY_BUFFER,this.attrBuffer.a_color,this.attrData.a_color),this.colorBufferChanged=!1),this.scaleChange&&(this.bufferData(this.gl.ARRAY_BUFFER,this.attrBuffer.a_scale,this.attrData.a_scale),this.scaleChange=!1),this.rotationChange&&(this.bufferData(this.gl.ARRAY_BUFFER,this.attrBuffer.a_rotation,this.attrData.a_rotation),this.rotationChange=!1)},t.prototype.render=function(){this.glExt.drawElementsInstancedANGLE(this.gl.TRIANGLES,this.attrData.indicate.length,this.gl.UNSIGNED_INT,0,this.elementList.length)},t.prototype.initTexture=function(){this.gl.uniform2f(this.uniformLocations.u_textureSize,this.options.textureSize,this.options.textureSize),this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texParameterf(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameterf(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameterf(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameterf(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.options.offSreen||this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.textureManager.canvas)},t.prototype.initBuffer=function(){Float32Array.prototype.forEach=Float32Array.prototype.forEach||Array.prototype.forEach,Uint8Array.prototype.forEach=Uint8Array.prototype.forEach||Array.prototype.forEach,Uint32Array.prototype.forEach=Uint32Array.prototype.forEach||Array.prototype.forEach,this.attrData={a_position:new Float32Array(2*this.options.maxNumber),a_spriteSize:new Float32Array(2*this.options.maxNumber),a_texCoord:new Float32Array(2*this.options.maxNumber),a_color:new Uint8Array(4*this.options.maxNumber),a_scale:new Float32Array(2*this.options.maxNumber),a_rotation:new Float32Array(1*this.options.maxNumber),a_direction:new Float32Array([0,0,0,1,1,0,1,1]),indicate:new Uint32Array([0,1,2,2,1,3])};var t=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.attrData.a_direction,this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(this.attribuitesLocations.a_direction),this.gl.vertexAttribPointer(this.attribuitesLocations.a_direction,2,this.gl.FLOAT,!1,0,0);var i=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.attrData.a_position,this.gl.STREAM_DRAW),this.gl.enableVertexAttribArray(this.attribuitesLocations.a_position),this.gl.vertexAttribPointer(this.attribuitesLocations.a_position,2,this.gl.FLOAT,!1,0,0),this.glExt.vertexAttribDivisorANGLE(this.attribuitesLocations.a_position,1);var e=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.attrData.a_spriteSize,this.gl.STREAM_DRAW),this.gl.enableVertexAttribArray(this.attribuitesLocations.a_spriteSize),this.gl.vertexAttribPointer(this.attribuitesLocations.a_spriteSize,2,this.gl.FLOAT,!1,0,0),this.glExt.vertexAttribDivisorANGLE(this.attribuitesLocations.a_spriteSize,1);var a=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.attrData.a_texCoord,this.gl.STREAM_DRAW),this.gl.enableVertexAttribArray(this.attribuitesLocations.a_texCoord),this.gl.vertexAttribPointer(this.attribuitesLocations.a_texCoord,2,this.gl.FLOAT,!1,0,0),this.glExt.vertexAttribDivisorANGLE(this.attribuitesLocations.a_texCoord,1);var r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.attrData.a_color,this.gl.STREAM_DRAW),this.gl.enableVertexAttribArray(this.attribuitesLocations.a_color),this.gl.vertexAttribPointer(this.attribuitesLocations.a_color,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.glExt.vertexAttribDivisorANGLE(this.attribuitesLocations.a_color,1);var s=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.attrData.a_scale,this.gl.STREAM_DRAW),this.gl.enableVertexAttribArray(this.attribuitesLocations.a_scale),this.gl.vertexAttribPointer(this.attribuitesLocations.a_scale,2,this.gl.FLOAT,!1,0,0),this.glExt.vertexAttribDivisorANGLE(this.attribuitesLocations.a_scale,1);var o=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.attrData.a_rotation,this.gl.STREAM_DRAW),this.gl.enableVertexAttribArray(this.attribuitesLocations.a_rotation),this.gl.vertexAttribPointer(this.attribuitesLocations.a_rotation,1,this.gl.FLOAT,!1,0,0),this.gl.vertexAttribPointer(this.attribuitesLocations.a_rotation,1,this.gl.FLOAT,!1,0,0),this.glExt.vertexAttribDivisorANGLE(this.attribuitesLocations.a_rotation,1);var n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.attrData.indicate,this.gl.STATIC_DRAW),this.attrBuffer={a_position:i,a_spriteSize:e,a_texCoord:a,a_color:r,a_scale:s,a_rotation:o,a_direction:t}},t.prototype.resize=function(){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.uniform2f(this.uniformLocations.u_windowSize,this.gl.canvas.width,this.gl.canvas.height)},t.prototype.setViewPort=function(t,i,e,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=this.gl.canvas.width),void 0===a&&(a=this.gl.canvas.height),this.gl.uniform2f(this.uniformLocations.u_cameraSize,e,a),this.gl.uniform2f(this.uniformLocations.u_cameraPosition,t,i),this.render()},t.prototype.initElement=function(t,i){t.elementIndex=this.elementList.length,this.elementList.push(t),this.updateZindex(),t.setPosition(i.position.x,i.position.y),t.setImgId(i.imgId);var e=i.color||WHITE,a=e.r,r=e.g,s=e.b,o=e.a;t.setColor(a,r,s,o),t.setRotation(0),t.setScale(1,1);var n=this.textureManager.getImageInfo(t.imgId),h=n.w,l=n.h;t.setTextureSize(h,l),t.setSize(h,l)},t.prototype.createElement=function(t){if(this.elementPool.size<=0){var i=new Iimage(this.handle);return this.initElement(i,t),i}return i=Array.from(this.elementPool)[0],this.elementPool.delete(i),this.initElement(i,t),i},t.prototype.destoryElement=function(t){var i=this.elementList.findIndex((function(i){return i===t}));if(i>-1){var e=this.elementList.splice(i,1)[0];this.elementPool.add(e),e.position.x=Number.MIN_VALUE,e.position.y=Number.MIN_VALUE}},t.prototype.loadImg=function(t){var i=this.textureManager.setImage(t);return this.textureChange=!0,i},t.prototype.handleZindexChange=function(){var t=this;this.zIndexChange&&(this.elementList.sort((function(t,i){return t.zIndex-i.zIndex})),this.elementList.forEach((function(i,e){e!==i.elementIndex&&(i.elementIndex=e,t.updatePosition(e,i.position),t.updateImage(e,i.imgId),t.updateColor(e,i.color),t.updateSize(e,i.elementSize),t.updateRotation(e,i.rotation),t.updateScale(e,i.scale),t.updateOffset(e,i.offset))})),this.zIndexChange=!1)},t}()},693:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(258).configure)([__webpack_require__(694)],module,!1)}).call(this,__webpack_require__(97)(module))},694:function(module,exports,__webpack_require__){var map={"./color.sb.tsx":695,"./create.performence.sb.tsx":737,"./game.sb.tsx":738,"./i-render.sb.tsx":742,"./muti_canvas.sb.tsx":744,"./offscreen.sb.tsx":745,"./resize.sb.tsx":746,"./surfing.sb.tsx":748,"./test.sb.tsx":751,"./view.sb.tsx":752};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=694},695:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ConverColorStr",(function(){return ConverColorStr}));var i_render__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(49),i_render__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0);function ConverColorStr(){var canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){var canvas=canvasRef.current;if(canvas){var irender=new i_render__WEBPACK_IMPORTED_MODULE_0__.a(canvas,{maxNumber:100,textureSize:1020}),rect=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.b)(irender,{x:1,y:1}),backageGround=irender.createElement({imgId:rect,position:{x:.5*canvas.width,y:.5*canvas.height},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("gray")});backageGround.setSize(1,1),backageGround.setScale(canvas.width,canvas.height);var circle=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(irender,30);irender.createElement({imgId:circle,position:{x:120,y:30},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("yellow")}),irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(irender,"yellow",{x:240,y:30}),position:{x:120,y:90},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("yellow")}),irender.createElement({imgId:circle,position:{x:360,y:30},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("rgba(255, 255, 0, 0.8 )")}),irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(irender,"rgba(255, 255, 0, 0.8 )",{x:240,y:30}),position:{x:360,y:90},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("rgba(255, 255, 0, 0.8 )")}),irender.createElement({imgId:circle,position:{x:600,y:30},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("rgb(255, 0, 0 )")}),irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(irender,"rgb(255, 0, 0 )",{x:240,y:30}),position:{x:600,y:90},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("rgb(255, 0, 0 )")}),irender.createElement({imgId:circle,position:{x:840,y:30},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#f00")}),irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(irender,"#f00",{x:240,y:30}),position:{x:840,y:90},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#f00")}),irender.createElement({imgId:circle,position:{x:1080,y:30},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#f00a")}),irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(irender,"#f00a",{x:240,y:30}),position:{x:1080,y:90},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#f00a")}),irender.createElement({imgId:circle,position:{x:1320,y:30},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#ff0000")}),irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(irender,"#ff0000",{x:240,y:30}),position:{x:1320,y:90},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#ff0000")}),irender.createElement({imgId:circle,position:{x:1560,y:30},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#ff0000aa")}),irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(irender,"#ff0000aa",{x:240,y:30}),position:{x:1560,y:90},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("#ff0000aa")}),irender.updateImidiatly(),console.log("up...")}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("canvas",{ref:canvasRef,width:window.innerWidth,height:window.innerHeight,style:{width:"100%",position:"absolute",top:0,left:0}})})}__webpack_exports__.default={title:"converColorStr",component:ConverColorStr},ConverColorStr.displayName="ConverColorStr"},737:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CreatePerformence",(function(){return CreatePerformence}));__webpack_require__(33),__webpack_require__(22),__webpack_require__(27),__webpack_require__(15),__webpack_require__(32),__webpack_require__(24),__webpack_require__(18),__webpack_require__(29),__webpack_require__(26),__webpack_require__(38),__webpack_require__(37);var react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1),i_render__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(10),i_render__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(49),_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(12),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(0);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function CreatePerformence(){var canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_11__.useRef)(),_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_11__.useState)(NaN),2),duration=_useState2[0],setDuration=_useState2[1];function init(render,imgId){!function initElement(render,imgId){for(var color=Object(i_render__WEBPACK_IMPORTED_MODULE_12__.a)("red"),i=0;i<1e4;i++){var x=i%200*20,y=20*Math.floor(i/200);render.createElement({imgId:imgId,position:{x:x,y:y},color:color})}}(render,imgId)}return Object(react__WEBPACK_IMPORTED_MODULE_11__.useEffect)((function(){var render=new i_render__WEBPACK_IMPORTED_MODULE_13__.a(canvasRef.current,{autoUpdate:!1}),imgId=Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(render,10),n=performance.now();init(render,imgId),setDuration(performance.now()-n),render.updateImidiatly()}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("p",{children:["create usage: ",duration," ms"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("canvas",{ref:canvasRef,width:800,height:800})]})}__webpack_exports__.default={title:"create performance",component:CreatePerformence},CreatePerformence.displayName="CreatePerformence"},738:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Run",(function(){return Run}));__webpack_require__(106),__webpack_require__(89),__webpack_require__(15),__webpack_require__(206),__webpack_require__(24),__webpack_require__(18),__webpack_require__(29),__webpack_require__(64),__webpack_require__(739),__webpack_require__(34),__webpack_require__(319),__webpack_require__(40),__webpack_require__(25),__webpack_require__(28),__webpack_require__(33),__webpack_require__(22),__webpack_require__(27),__webpack_require__(32),__webpack_require__(26),__webpack_require__(38),__webpack_require__(37);var react__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(1),i_render__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(49),_assets_player2_stand1_png__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(321),_assets_player2_stand1_png__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_assets_player2_stand1_png__WEBPACK_IMPORTED_MODULE_23__),_assets_player2_run1_png__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(322),_assets_player2_run1_png__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_assets_player2_run1_png__WEBPACK_IMPORTED_MODULE_24__),_assets_player2_run2_png__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(323),_assets_player2_run2_png__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_assets_player2_run2_png__WEBPACK_IMPORTED_MODULE_25__),_assets_player2_run3_png__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(324),_assets_player2_run3_png__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_assets_player2_run3_png__WEBPACK_IMPORTED_MODULE_26__),_assets_player2_run4_png__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(325),_assets_player2_run4_png__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_assets_player2_run4_png__WEBPACK_IMPORTED_MODULE_27__),_assets_player2_run5_png__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(326),_assets_player2_run5_png__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_assets_player2_run5_png__WEBPACK_IMPORTED_MODULE_28__),_assets_player2_run6_png__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(327),_assets_player2_run6_png__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_assets_player2_run6_png__WEBPACK_IMPORTED_MODULE_29__),_assets_player2_run7_png__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(328),_assets_player2_run7_png__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(_assets_player2_run7_png__WEBPACK_IMPORTED_MODULE_30__),_fps__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(19),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__=(__webpack_require__(740),__webpack_require__(0));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function loadImage(iRender,url){var img=new Image;return img.src=url,new Promise((function(r){img.onload=function(){var id=iRender.loadImg(img);r(id)}}))}function _init(){return(_init=_asyncToGenerator(regeneratorRuntime.mark((function _callee(iRender,runId,curRunId,_ref){var total,scale,xCount,stand,runUrlList,runAnimIds,cur,playerList,i,x,y,player,lastTime;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return total=_ref.total,scale=_ref.scale,xCount=_ref.xCount,_context.next=3,loadImage(iRender,_assets_player2_stand1_png__WEBPACK_IMPORTED_MODULE_23___default.a);case 3:return stand=_context.sent,runUrlList=[_assets_player2_run1_png__WEBPACK_IMPORTED_MODULE_24___default.a,_assets_player2_run2_png__WEBPACK_IMPORTED_MODULE_25___default.a,_assets_player2_run3_png__WEBPACK_IMPORTED_MODULE_26___default.a,_assets_player2_run4_png__WEBPACK_IMPORTED_MODULE_27___default.a,_assets_player2_run5_png__WEBPACK_IMPORTED_MODULE_28___default.a,_assets_player2_run6_png__WEBPACK_IMPORTED_MODULE_29___default.a,_assets_player2_run7_png__WEBPACK_IMPORTED_MODULE_30___default.a],_context.next=7,Promise.all(runUrlList.map((function(url){return loadImage(iRender,url)})));case 7:for(runAnimIds=(runAnimIds=_context.sent).concat(runAnimIds.reverse()).reverse(),cur=0,playerList=[],i=0;i<total;i++)x=120*scale*Math.floor(i%xCount)+60*scale,y=140*scale*Math.floor(i/xCount)+60*scale,(player=iRender.createElement({imgId:stand,position:{x:x,y:y}})).setScale(-scale,scale),playerList.push(player);lastTime=.001*Date.now(),function run(runId){var now=.001*Date.now();if(now-lastTime>=.07){var ind=cur++%runAnimIds.length;playerList.forEach((function(player,playerInd){var cc=runAnimIds[(ind+playerInd)%runAnimIds.length];player.setImgId(cc)})),lastTime=now}runId===curRunId.runId&&requestAnimationFrame((function(){return run(runId)}))}(runId);case 15:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function Run(){var renderRef=Object(react__WEBPACK_IMPORTED_MODULE_21__.useRef)(),canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_21__.useRef)(),wrapRef=Object(react__WEBPACK_IMPORTED_MODULE_21__.useRef)(),_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)(2e4),2),total=_useState2[0],setTotal=_useState2[1],_useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)(110),2),xCount=_useState4[0],setXCount=_useState4[1],_useState6=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)(1),2),scale=_useState6[0],setScale=_useState6[1],cancelHandleRef=Object(react__WEBPACK_IMPORTED_MODULE_21__.useRef)({runId:0});return Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){var canvas=canvasRef.current;if(canvas)return cancelHandleRef.current.runId++,Object(_fps__WEBPACK_IMPORTED_MODULE_31__.b)(),console.log("cancelHandleRef.current.runId",cancelHandleRef.current.runId),canvas.width=document.documentElement.clientWidth,canvas.height=document.documentElement.clientHeight,renderRef.current=new i_render__WEBPACK_IMPORTED_MODULE_22__.a(canvas,{maxNumber:2e5}),function init(_x,_x2,_x3,_x4){return _init.apply(this,arguments)}(renderRef.current,cancelHandleRef.current.runId,cancelHandleRef.current,{total:total,scale:scale,xCount:xCount}),Object(_fps__WEBPACK_IMPORTED_MODULE_31__.a)(),function(){cancelHandleRef.current.runId++,Object(_fps__WEBPACK_IMPORTED_MODULE_31__.b)()}}),[total,xCount,scale]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)("div",{ref:wrapRef,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)("div",{className:"game_Wrap",style:{},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx)("p",{id:"fps"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)("div",{className:"item",children:["总数量： ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx)("input",{type:"range",min:"500",max:"200000",step:"1",value:total,onChange:function onChange(e){return setTotal(Number(e.target.value))}})," ",total]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)("div",{className:"item",children:["列数：  ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx)("input",{type:"range",min:"10",max:"200",step:"1",value:xCount,onChange:function onChange(e){return setXCount(Number(e.target.value))}})," ",xCount]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsxs)("div",{className:"item",children:["缩放：",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx)("input",{type:"range",min:"0.01",max:"1",step:"0.01",value:scale,onChange:function onChange(e){return setScale(Number(e.target.value))}})," ",scale]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_33__.jsx)("canvas",{ref:canvasRef,style:{width:"100%",height:"100%"}})]})}__webpack_exports__.default={title:"Run RENDER",component:Run},Run.displayName="Run"},740:function(module,exports,__webpack_require__){var api=__webpack_require__(214),content=__webpack_require__(741);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},741:function(module,exports,__webpack_require__){(exports=__webpack_require__(215)(!1)).push([module.i,".game_Wrap {\n  position: fixed;\n   bottom: 0;\n left: 0;\n right: 0;\n margin:0;\n padding: 0;\n padding-bottom: 20;\n opacity: 0.7;\n color: white;\n background: black;\n display: flex;\n flex-direction: column\n}\n\n.game_Wrap .item {\n  display: flex;\n  margin: 5px;\n}\n\n.game_Wrap .item input {\n  flex: 1 1;\n}\n\n#fps{\n  min-height: 22; \n  margin: 0;\n  padding: 0;\n}",""]),module.exports=exports},742:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Test",(function(){return Test})),__webpack_require__.d(__webpack_exports__,"PerformenceTest",(function(){return PerformenceTest})),__webpack_require__.d(__webpack_exports__,"Canvas2dPerformenceTest",(function(){return Canvas2dPerformenceTest})),__webpack_require__.d(__webpack_exports__,"ColorTest",(function(){return ColorTest})),__webpack_require__.d(__webpack_exports__,"zIndexTest",(function(){return zIndexTest})),__webpack_require__.d(__webpack_exports__,"TextureTest",(function(){return TextureTest}));__webpack_require__(318),__webpack_require__(25),__webpack_require__(28),__webpack_require__(88);var react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),i_render__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(49),_fps__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(19),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__(320),__webpack_require__(0));function Test(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{children:"test..."})}__webpack_exports__.default={title:"Demo RENDER",component:Test},Test.displayName="Test";function PerformenceTest(){var cRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),textureRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),glRenderRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){var glRender=new i_render__WEBPACK_IMPORTED_MODULE_5__.a(cRef.current,{maxNumber:85e3});glRenderRef.current=glRender;var circle=document.createElement("canvas");circle.width=100,circle.height=100;var ctx=circle.getContext("2d");ctx.fillStyle="rgba(50,255,255,0.5)",ctx.lineWidth=0,ctx.arc(50,50,50,0,2*Math.PI),ctx.fill();var circleImgId=glRender.loadImg(circle);ctx.clearRect(0,0,100,100),ctx.fillStyle="rgba(255,125,125,0.5)",ctx.arc(50,50,50,0,2*Math.PI),ctx.fill();for(var halfImgId=glRender.loadImg(circle),reqH={a:0},list=[],i=0;i<850;i++)for(var j=0;j<100;j++)list.push(glRender.createElement({imgId:list.length%2?circleImgId:halfImgId,position:{x:50*(i+1),y:50*(j+1)}}));console.log("total:",list.length);var frameCount=0;function update(el,i){el.setImgId((frameCount+i)%60?circleImgId:halfImgId)}return function req(tt){frameCount++,list.forEach(update),reqH.a=requestAnimationFrame(req)}(),Object(_fps__WEBPACK_IMPORTED_MODULE_6__.a)(),function(){Object(_fps__WEBPACK_IMPORTED_MODULE_6__.b)(),cancelAnimationFrame(reqH.a)}}),[]),Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){textureRef.current.getContext("2d").drawImage(glRenderRef.current.getTexture(),0,0,200,200,0,0,200,200)}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{style:{position:"relative",width:2800/devicePixelRatio,height:1300/devicePixelRatio},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h1",{style:{color:"greenyellow"},children:"1111111111111111"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h1",{style:{color:"greenyellow"},children:"1111111111111111"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h1",{style:{color:"greenyellow"},children:"1111111111111111"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h1",{style:{color:"greenyellow"},children:"1111111111111111"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:cRef,width:2800,height:1300,style:{width:2800/devicePixelRatio,height:1300/devicePixelRatio,backgroundColor:"rgb(122,122,122,0.5)",position:"absolute",top:"0"}})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:textureRef,width:200,height:200,style:{backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{id:"fps"})]})}function Canvas2dPerformenceTest(){var cRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),textureRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)();Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){console.log("total:",85e3);var canvas=cRef.current;if(canvas){var ctx=canvas.getContext("2d"),reqH={a:0};ctx.fillStyle="rgba(255,125,0,0.3)";return Object(_fps__WEBPACK_IMPORTED_MODULE_6__.a)(),function req(){ctx.clearRect(0,0,canvas.width,canvas.height);for(var i=0;i<850;i++)for(var j=0;j<100;j++)ctx.beginPath(),ctx.arc(50*i*.3,50*j*.3,50,0,2*Math.PI),ctx.fill();reqH.a=requestAnimationFrame(req)}(),function(){Object(_fps__WEBPACK_IMPORTED_MODULE_6__.b)(),cancelAnimationFrame(reqH.a)}}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:cRef,width:2800,height:1300,style:{width:2800/devicePixelRatio,height:1300/devicePixelRatio,backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:textureRef,width:200,height:200,style:{backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{id:"fps",style:{backgroundColor:"white",position:"fixed",left:0,top:0}})]})}function ColorTest(){var cRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),textureRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),glRenderRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){var glRender=new i_render__WEBPACK_IMPORTED_MODULE_5__.a(cRef.current,{maxNumber:4});glRenderRef.current=glRender;var circle=document.createElement("canvas");circle.width=100,circle.height=100;var ctx=circle.getContext("2d");ctx.fillStyle="rgba(255, 255, 255, 1)",ctx.strokeStyle="rgba(0,0,255, 1)",ctx.lineWidth=10,ctx.arc(50,50,40,0,2*Math.PI),ctx.fill();var whiteId=glRender.loadImg(circle);ctx.clearRect(0,0,100,100),ctx.fillStyle="rgba(255,0,0,0.8)",ctx.arc(50,50,50,0,2*Math.PI),ctx.fill();var redId=glRender.loadImg(circle),reqH_a=0;return glRender.createElement({imgId:redId,position:{x:150,y:50}}),glRender.createElement({imgId:redId,position:{x:50*2.3,y:50}}),glRender.createElement({imgId:whiteId,position:{x:50,y:50},color:{r:255,g:0,b:0,a:.8}}),glRender.createElement({imgId:whiteId,position:{x:25,y:25},color:{r:255,g:0,b:0,a:.8}}),function(){cancelAnimationFrame(reqH_a)}}),[]),Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){textureRef.current.getContext("2d").drawImage(glRenderRef.current.getTexture(),0,0,200,200,0,0,200,200)}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:cRef,width:2800,height:1300,style:{width:2800/devicePixelRatio,height:1300/devicePixelRatio,backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:textureRef,width:200,height:200,style:{backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{id:"fps",style:{backgroundColor:"white",position:"fixed",left:0,top:0}})]})}function zIndexTest(){var cRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),textureRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),glRenderRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){var glRender=new i_render__WEBPACK_IMPORTED_MODULE_5__.a(cRef.current,{maxNumber:30});glRenderRef.current=glRender;var circle=document.createElement("canvas");circle.width=100,circle.height=100;var ctx=circle.getContext("2d");ctx.fillStyle="rgba(255,255,255,1)",ctx.lineWidth=0,ctx.fillRect(0,0,100,100);var cirle=glRender.loadImg(circle),green=glRender.createElement({imgId:cirle,position:{x:150,y:75},color:{r:0,g:255,b:0,a:.8}}),red=glRender.createElement({imgId:cirle,position:{x:75,y:75},color:{r:255,g:0,b:0,a:.8}});glRender.createElement({imgId:cirle,position:{x:112.5,y:125},color:{r:0,g:0,b:255,a:.8}});return green.setZIndex(2),red.setZIndex(3),Object(_fps__WEBPACK_IMPORTED_MODULE_6__.a)(),function(){Object(_fps__WEBPACK_IMPORTED_MODULE_6__.b)()}}),[]),Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){textureRef.current.getContext("2d").drawImage(glRenderRef.current.getTexture(),0,0,200,200,0,0,200,200)}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:cRef,width:2800,height:1300,style:{width:2800/devicePixelRatio,height:1300/devicePixelRatio,backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:textureRef,width:200,height:200,style:{backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{id:"fps",style:{backgroundColor:"white",position:"fixed",left:0,top:0}})]})}function TextureTest(){var cRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),wrapRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),textureRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),glRenderRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){var glRender=new i_render__WEBPACK_IMPORTED_MODULE_5__.a(cRef.current,{maxNumber:85e3});glRenderRef.current=glRender;var numberIdMap=function addNumberTexture(){var glRender=glRenderRef.current,imgIdMap={},canvas=document.createElement("canvas");canvas.width=80,canvas.height=50;var ctx=canvas.getContext("2d");ctx.textAlign="left",ctx.textBaseline="top",ctx.fillStyle="red",ctx.font="50px 微软雅黑";for(var t=1;t<1e3;t++)ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillText(t+"",0,0,80),imgIdMap[t]=glRender.loadImg(canvas);return imgIdMap}();if(wrapRef.current){var cc=glRenderRef.current.getTexture();cc.style.width="1000px",wrapRef.current.appendChild(cc)}Object.values(numberIdMap).forEach((function(imgId,indx){var x=100*(indx%28+.5),y=100*(.5+Math.floor(indx/28)),el=glRender.createElement({position:{x:x,y:y},imgId:imgId});el.setRotation(45),el.setScale(1,-1)}))}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{ref:wrapRef,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:cRef,width:2800,height:1300,style:{width:2800/devicePixelRatio,height:1300/devicePixelRatio,backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:textureRef,width:200,height:200,style:{backgroundColor:"rgb(122,122,122,1)"}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{id:"fps",style:{backgroundColor:"white",position:"fixed",left:0,top:0}})]})}PerformenceTest.displayName="PerformenceTest",Canvas2dPerformenceTest.displayName="Canvas2dPerformenceTest",ColorTest.displayName="ColorTest",zIndexTest.displayName="zIndexTest",TextureTest.displayName="TextureTest"},743:function(module,exports,__webpack_require__){(exports=__webpack_require__(215)(!1)).push([module.i,"#fps{\n  background: black;\n  color: white;\n  padding: 2px;\n  opacity: 0.5;\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 70px;\n  height: 26px;\n  overflow: hidden;\n  font-size: 16px;\n}",""]),module.exports=exports},744:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Muticanvas",(function(){return Muticanvas})),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));__webpack_require__(64),__webpack_require__(37),__webpack_require__(24),__webpack_require__(25),__webpack_require__(28),__webpack_require__(104),__webpack_require__(15),__webpack_require__(18),__webpack_require__(29),__webpack_require__(317);var i_render__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(49),i_render__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(10),react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1),_fps__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(19),_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(12),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(0);__webpack_exports__.default={title:"Muticanvas",component:Muticanvas};var can=document.createElement("canvas");function Muticanvas(){var arr=Array.from(new Array(100)).map((function(v,ind){return{id:ind,canvas:can,color:ind%2?"red":"yellow"}}));return Object(react__WEBPACK_IMPORTED_MODULE_12__.useEffect)((function(){var glCanavs=document.createElement("canvas");glCanavs.width=1e3,glCanavs.height=1e3;for(var irender=new i_render__WEBPACK_IMPORTED_MODULE_10__.a(glCanavs,{autoUpdate:!1,maxNumber:1e4,offSreen:!0}),circleId=Object(_utils__WEBPACK_IMPORTED_MODULE_14__.a)(irender,5),aelArr=[],i=0;i<1e4;i++){var x=i%100,y=Math.floor(i/100),c=irender.createElement({imgId:circleId,position:{x:6+11*x,y:6+11*y}});aelArr.push(c)}arr.forEach((function(_ref,ind){var canvas=_ref.canvas,_converColorStr=Object(i_render__WEBPACK_IMPORTED_MODULE_11__.a)(ind%2?"darkorange":"cadetblue"),r=_converColorStr.r,g=_converColorStr.g,b=_converColorStr.b,a=_converColorStr.a;aelArr.forEach((function(el){return el.setColor(r,g,b,a)})),irender.updateImidiatly();var ctx=canvas.getContext("2d");ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx&&ctx.drawImage(irender.glCanvas,0,0)}));var highLightedCanvasIndList=new Set;var handleHighLight=function handleHighLight(e){!function recoverHighlight(){highLightedCanvasIndList.forEach((function(ind){var _converColorStr2=Object(i_render__WEBPACK_IMPORTED_MODULE_11__.a)(ind%2?"darkorange":"cadetblue"),r=_converColorStr2.r,g=_converColorStr2.g,b=_converColorStr2.b,a=_converColorStr2.a,ctx=arr[ind].canvas.getContext("2d");aelArr.forEach((function(el){el.setColor(r,g,b,a)})),irender.updateImidiatly(),ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.drawImage(irender.glCanvas,0,0)})),highLightedCanvasIndList=new Set}();var ind=arr.findIndex((function(_ref2){return _ref2.canvas===e.target}));if(ind>-1){var originColor=Object(i_render__WEBPACK_IMPORTED_MODULE_11__.a)(ind%2?"darkorange":"cadetblue"),_converColorStr3=Object(i_render__WEBPACK_IMPORTED_MODULE_11__.a)(ind%2?"rgba(255,255,0,1)":"rgba(0,255,200,1)"),_r=_converColorStr3.r,g=_converColorStr3.g,b=_converColorStr3.b,a=_converColorStr3.a,p={x:e.offsetX,y:e.offsetY};aelArr.forEach((function(el){if(function dist(p1,p2){var dx=p2.x-p1.x,dy=p2.y-p1.y;return Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2))}(p,el.position)<=150)el.setColor(_r,g,b,a),highLightedCanvasIndList.add(ind);else{var _r2=originColor.r,_g=originColor.g,_b=originColor.b,_a=originColor.a;el.setColor(_r2,_g,_b,_a)}})),irender.updateImidiatly();var ctx=e.target.getContext("2d");ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx&&ctx.drawImage(irender.glCanvas,0,0)}};return window.addEventListener("pointermove",handleHighLight),Object(_fps__WEBPACK_IMPORTED_MODULE_13__.a)(),function(){Object(_fps__WEBPACK_IMPORTED_MODULE_13__.b)(),window.removeEventListener("pointermove",handleHighLight)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{style:{fontSize:0},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{id:"fps"}),arr.map((function(a){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("canvas",{ref:function ref(c){a.canvas=c},style:{cursor:"pointer",background:"grey",margin:0,padding:0,lineHeight:0,borderWidth:0,display:"inline-block"},width:1e3,height:1e3},a.id)}))]})}function Demo(_ref3){var renderer=_ref3.renderer,elemrnts=_ref3.elemrnts,color=_ref3.color,canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_12__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_12__.useEffect)((function(){if(renderer){var ctx=canvasRef.current.getContext("2d"),_converColorStr4=Object(i_render__WEBPACK_IMPORTED_MODULE_11__.a)(color),r=_converColorStr4.r,g=_converColorStr4.g,b=_converColorStr4.b,a=_converColorStr4.a;elemrnts.forEach((function(e){e.setColor(r,g,b,a)})),renderer.updateImidiatly(),ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.drawImage(renderer.glCanvas,0,0)}}),[renderer,color]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("canvas",{ref:canvasRef,width:1e3,height:1e3})}Muticanvas.displayName="Muticanvas",Demo.displayName="Demo";try{Demo.displayName="Demo",Demo.__docgenInfo={description:"",displayName:"Demo",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string"}},renderer:{defaultValue:null,description:"",name:"renderer",required:!0,type:{name:"IRender"}},elemrnts:{defaultValue:null,description:"",name:"elemrnts",required:!0,type:{name:"Iimage[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/muti_canvas.sb.tsx#Demo"]={docgenInfo:Demo.__docgenInfo,name:"Demo",path:"stories/muti_canvas.sb.tsx#Demo"})}catch(__react_docgen_typescript_loader_error){}},745:function(module,exports){},746:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Resize",(function(){return Resize}));__webpack_require__(747);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),i_render__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(49),i_render__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0);function Resize(){var canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_1__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){var render=new i_render__WEBPACK_IMPORTED_MODULE_3__.a(canvasRef.current),circleId=Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(render,10);render.createElement({imgId:circleId,position:{x:10,y:10},color:Object(i_render__WEBPACK_IMPORTED_MODULE_4__.a)("red")}),setTimeout((function(){canvasRef.current.width=100,canvasRef.current.height=100,render.resize(),render.setViewPort(0,0,100,100)}),100)}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("canvas",{width:0,height:0,ref:canvasRef})}__webpack_exports__.default={title:"Resize",component:Resize},Resize.displayName="Resize"},748:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Surfing",(function(){return Surfing}));__webpack_require__(36),__webpack_require__(72),__webpack_require__(25),__webpack_require__(28),__webpack_require__(319),__webpack_require__(40),__webpack_require__(33),__webpack_require__(22),__webpack_require__(27),__webpack_require__(15),__webpack_require__(32),__webpack_require__(24),__webpack_require__(18),__webpack_require__(29),__webpack_require__(26),__webpack_require__(38),__webpack_require__(37);var react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(1),i_render__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(49),_fps__WEBPACK_IMPORTED_MODULE_21__=(__webpack_require__(749),__webpack_require__(320),__webpack_require__(19)),_utils__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(12),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(0);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_exports__.default={title:"Surfing",component:Surfing};var SurfingElementObj=function(){function SurfingElementObj(img){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SurfingElementObj),this.v={x:0,y:-10},this.INIT_A={x:0,y:-50},this.a={x:10,y:-500},this.color=void 0,this.colorLerp=0,this.r=void 0,this.img=void 0,this.a.x=this.INIT_A.x,this.a.y=this.INIT_A.y,this.color=Object.assign({},img.color),this.r=.5*img.size.x,this.img=img}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SurfingElementObj,[{key:"update",value:function update(deltaTime){this.v.x+=this.a.x*deltaTime,this.v.y+=this.a.y*deltaTime,this.v.x=Math.min(Math.max(this.v.x,-200),200);var _this$img$position=this.img.position,x=_this$img$position.x,y=_this$img$position.y;this.img.setPosition(this.v.x*deltaTime+x,this.v.y*deltaTime+y);var _this$img$color=this.img.color,r=_this$img$color.r,g=_this$img$color.g,b=_this$img$color.b,a=_this$img$color.a,_this$color=this.color,tR=_this$color.r,tG=_this$color.g,tB=_this$color.b,tA=_this$color.a;this.colorLerp+=.05*deltaTime,this.colorLerp>1&&(this.colorLerp=1,this.img.setColor(tR,tG,tB,tA)),this.colorLerp<1&&this.img.setColor((tR-r)*this.colorLerp+r,(tG-g)*this.colorLerp+g,(tB-b)*this.colorLerp+b,(tA-a)*this.colorLerp+a)}}]),SurfingElementObj}();function surfingAnim(surfingElementObjList,w,h,point,deltaTime){var _point=_slicedToArray(point,3),pX=_point[0],pY=_point[1],pR=_point[2];surfingElementObjList.forEach((function(surfingElementObj){var _surfingElementObj$im=surfingElementObj.img.position,x=_surfingElementObj$im.x,y=_surfingElementObj$im.y,vy=.002*(h-y),random=Math.random();surfingElementObj.a.x=200*(random<.5?1:-1),(y-=vy<1?1:vy)<-10&&(y=h,x=Math.random()*w,surfingElementObj.img.setPosition(x,y),surfingElementObj.a.y=surfingElementObj.INIT_A.y,surfingElementObj.v.x=0,surfingElementObj.v.y=500*-random),function distance(p1X,p1Y,p2X,p2Y){return Math.sqrt(Math.pow(p2X-p1X,2)+Math.pow(p2Y-p1Y,2))}(pX,pY,x,y)<=pR+surfingElementObj.r&&(surfingElementObj.v.x=pX>x?-200:200,surfingElementObj.img.setColor(10*random+245,30*Math.random()+220,20*Math.random()+200,1),surfingElementObj.colorLerp=0),x<=surfingElementObj.r&&(surfingElementObj.v.x=Math.abs(surfingElementObj.v.x)),x>=w-surfingElementObj.r&&(surfingElementObj.v.x=-Math.abs(surfingElementObj.v.x)),surfingElementObj.update(deltaTime)}))}function Surfing(){var canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_17__.useRef)(),irenderRef=Object(react__WEBPACK_IMPORTED_MODULE_17__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_17__.useEffect)((function(){document.title="I Render";var canvas=canvasRef.current;if(canvas){var irender=new i_render__WEBPACK_IMPORTED_MODULE_18__.a(canvas,{maxNumber:25002});irenderRef.current=irender,irender.createElement({imgId:Object(_utils__WEBPACK_IMPORTED_MODULE_22__.b)(irender,{x:1,y:1}),position:{x:.5*canvas.width,y:.5*canvas.height},color:{r:255,g:127,b:127,a:1}}).setScale(canvas.width,canvas.height);var circleTextureId=Object(_utils__WEBPACK_IMPORTED_MODULE_22__.a)(irenderRef.current,100),point=[.5*canvas.width,.5*canvas.height,35],pointImg=irenderRef.current.createElement({imgId:circleTextureId,position:{x:point[0],y:point[1]}});pointImg.setColor(255,200,0,1),pointImg.setScale(.35,.35);var surfingElementObjList=function createSurfingElementObj(irender,smockId,num){for(var surfingElementObjList=[],i=0;i<num;i++){var surfingElement=irender.createElement({imgId:smockId,position:{x:Math.random()*irender.glCanvas.width,y:0}}),scale=.05*Math.random()+.05;surfingElement.setScale(scale,scale),surfingElement.setColor(127*Math.random()+117,127+117*Math.random(),127*Math.random()+118,1);var obj=new SurfingElementObj(surfingElement);surfingElementObjList.push(obj)}return surfingElementObjList}(irenderRef.current,circleTextureId,25e3);canvas.addEventListener("mousemove",(function(e){e.preventDefault(),point[0]=e.clientX*devicePixelRatio,point[1]=e.clientY*devicePixelRatio,pointImg.setPosition(point[0],point[1])})),canvas.addEventListener("touchmove",(function(e){e.preventDefault();var p=e.touches[0];point[0]=p.clientX*devicePixelRatio,point[1]=(p.clientY-100)*devicePixelRatio,pointImg.setPosition(point[0],point[1])}),{passive:!1});var reqHandle={id:0,deltaTime:0},lastTime=.001*Date.now();return function start(){var now=.001*Date.now();reqHandle.deltaTime=now-lastTime,lastTime=now,surfingAnim(surfingElementObjList,canvas.width,canvas.height,point,reqHandle.deltaTime),reqHandle.id=requestAnimationFrame(start)}(),Object(_fps__WEBPACK_IMPORTED_MODULE_21__.a)(),function(){cancelAnimationFrame(reqHandle.id),Object(_fps__WEBPACK_IMPORTED_MODULE_21__.b)()}}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{className:"surfing",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("div",{id:"fps"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{className:"pannel",children:["粒子数量：",25e3]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("canvas",{ref:canvasRef,width:window.innerWidth*window.devicePixelRatio,height:window.innerHeight*window.devicePixelRatio})]})}Surfing.displayName="Surfing"},749:function(module,exports,__webpack_require__){var api=__webpack_require__(214),content=__webpack_require__(750);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},750:function(module,exports,__webpack_require__){(exports=__webpack_require__(215)(!1)).push([module.i,"html {\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n}\nbody{\n  margin: 0;\n  padding: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  /* overflow: hidden; */\n  width: 100%;\n  height: 100%;\n}\n\n#root, .surfing, .surfing canvas {\n  width: 100%;\n  height: 100%;\n}\n\n.surfing{\n  overflow: hidden;\n}\n.sb-show-main.sb-main-padded {\n  padding: 0;\n}\n\n.pannel {\n  position: fixed;\n  top: 0;\n  right: 0;\n  background-color: black;\n  opacity: 0.5;\n  color: white;\n  padding: 5px;\n  z-index: 10;\n}\n/* \n */\n\n/* canvas{\n  background: black;\n} */\n\n",""]),module.exports=exports},751:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Test",(function(){return Test}));__webpack_require__(25);var i_render__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(49),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_assets_maggot_png__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(329),_assets_maggot_png__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_assets_maggot_png__WEBPACK_IMPORTED_MODULE_3__),_fps__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0);function Test(){var canvsRef=Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){var irender=new i_render__WEBPACK_IMPORTED_MODULE_1__.a(canvsRef.current,{maxNumber:5e4}),img=new Image,list=[];img.onload=function(){for(var imgId=irender.loadImg(img),i=0;i<3e4;i++){var x=i%200*33,y=70*Math.floor(i/200),el=irender.createElement({imgId:imgId,position:{x:x,y:y}});list.push(el)}},img.src=_assets_maggot_png__WEBPACK_IMPORTED_MODULE_3___default.a;var hanlde={a:0};return function req(){list.forEach((function(el){el.setRotation(360*Math.random())})),hanlde.a=requestAnimationFrame(req)}(),Object(_fps__WEBPACK_IMPORTED_MODULE_4__.a)(),function(){cancelAnimationFrame(hanlde.a),Object(_fps__WEBPACK_IMPORTED_MODULE_4__.b)()}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{id:"fps"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("canvas",{ref:canvsRef,width:1e3,height:1e3})]})}__webpack_exports__.default={title:"Test",component:Test},Test.displayName="Test"},752:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ViewPort",(function(){return ViewPort}));var i_render__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(49),i_render__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0);function ViewPort(){var canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)();Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)();return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){document.body.style.padding="0";for(var renderer=new i_render__WEBPACK_IMPORTED_MODULE_0__.a(canvasRef.current,{maxNumber:3e5}),circleId=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(renderer,16),rectId=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.b)(renderer,{x:20,y:20}),text=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.c)(renderer,"1",{x:20,y:20}),i=0;i<1e5;i++){var yCount=Math.floor(i/500),xCount=i%500;renderer.createElement({imgId:circleId,position:{x:16*xCount*2,y:16*yCount*2},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("darkblue")}),renderer.createElement({imgId:rectId,position:{x:16*xCount*2,y:16*yCount*2},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("lightblue")}),renderer.createElement({imgId:text,position:{x:16*xCount*2,y:16*yCount*2},color:Object(i_render__WEBPACK_IMPORTED_MODULE_1__.a)("white")})}var vx=0,vy=0,w=500,h=500,handleKey=function handleKey(e){"w"===e.key&&(vy-=10),"s"===e.key&&(vy+=10),"a"===e.key&&(vx-=10),"d"===e.key&&(vx+=10),"e"===e.key&&(w+=100,h+=100),"q"===e.key&&(w-=100,h-=100),renderer.setViewPort(vx,vy,w,h)};return window.addEventListener("keydown",handleKey),function(){return window.removeEventListener("keydown",handleKey)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("canvas",{ref:canvasRef,width:"2000",height:"2000",style:{width:600,height:600,border:"red solid 1px"}})}__webpack_exports__.default={title:"View Port",component:ViewPort},ViewPort.displayName="ViewPort"}},[[331,1,2]]]);
//# sourceMappingURL=main.b204a2d12795b6e260b4.bundle.js.map